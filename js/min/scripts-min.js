!function($){$("#burger").click(function(){$("#mobile-nav-wrap").slideToggle(600,"easeOutBounce")}),$(".flip-container").click(function(){$(this).toggleClass("hover")}),$(".menu-toggle").click(function(){return $(this).toggleClass("open"),$(".main-navigation").toggleClass("open"),!1}),$("video").on("ended",function(){console.log("reloading"),this.load(),this.play()});var i=$.event,e,t;e=i.special.debouncedresize={setup:function(){$(this).on("resize",e.handler)},teardown:function(){$(this).off("resize",e.handler)},handler:function(n,s){var a=this,o=arguments,h=function(){n.type="debouncedresize",i.dispatch.apply(a,o)};t&&clearTimeout(t),s?h():t=setTimeout(h,e.threshold)},threshold:250};var n="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";$.fn.imagesLoaded=function(i){function e(){var e=$(d),t=$(l);a&&(l.length?a.reject(h,e,t):a.resolve(h)),$.isFunction(i)&&i.call(s,h,e,t)}function t(i,t){i.src!==n&&-1===$.inArray(i,r)&&(r.push(i),t?l.push(i):d.push(i),$.data(i,"imagesLoaded",{isBroken:t,src:i.src}),o&&a.notifyWith($(i),[t,h,$(d),$(l)]),h.length===r.length&&(setTimeout(e),h.unbind(".imagesLoaded")))}var s=this,a=$.isFunction($.Deferred)?$.Deferred():0,o=$.isFunction(a.notify),h=s.find("img").add(s.filter("img")),r=[],d=[],l=[];return $.isPlainObject(i)&&$.each(i,function(e,t){"callback"===e?i=t:a&&a[e](t)}),h.length?h.bind("load.imagesLoaded error.imagesLoaded",function(i){t(i.target,"error"===i.type)}).each(function(i,e){var s=e.src,a=$.data(e,"imagesLoaded");return a&&a.src===s?void t(e,a.isBroken):e.complete&&void 0!==e.naturalWidth?void t(e,0===e.naturalWidth||0===e.naturalHeight):void((e.readyState||e.complete)&&(e.src=n,e.src=s))}):e(),a?a.promise(s):s};var s=function(){function i(i){y=$.extend(!0,{},y,i),d.imagesLoaded(function(){t(!0),a(),n()})}function e(i){l=l.add(i),i.each(function(){var i=$(this);i.data({offsetTop:i.offset().top,height:i.height()})}),s(i)}function t(i){l.each(function(){var e=$(this);e.data("offsetTop",e.offset().top),i&&e.data("height",e.height())})}function n(){s(l),p.on("debouncedresize",function(){f=0,g=-1,t(),a();var i=$.data(this,"preview");"undefined"!=typeof i&&h()})}function s(i){i.on("click","span.og-close",function(){return h(),!1}).children("a").on("click",function(i){var e=$(this).parent();return c===e.index()?h():o(e),!1})}function a(){m={width:p.width(),height:p.height()}}function o(i){var e=$.data(this,"preview"),t=i.data("offsetTop");if(f=0,"undefined"!=typeof e){if(g===t)return e.update(i),!1;t>g&&(f=e.height),h()}g=t,e=$.data(this,"preview",new r(i)),e.open()}function h(){c=-1;var i=$.data(this,"preview");i.close(),$.removeData(this,"preview")}function r(i){this.$item=i,this.expandedIdx=this.$item.index(),this.create(),this.update()}var d=$("#leadership-grid"),l=d.children("li"),c=-1,g=-1,f=0,u=10,p=$(window),m,v=$("html, body"),w={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},A=w[Modernizr.prefixed("transition")],T=Modernizr.csstransitions,y={minHeight:400,speed:350,easing:"ease"};return r.prototype={create:function(){this.$title=$("<h4></h4>"),this.$name=$("<h3></h3>"),this.$description=$('<div class="summary"></div>'),this.$href=$(""),this.$details=$('<div class="og-details"></div>').append(this.$name,this.$title,this.$description),this.$loading=$('<div class="og-loading"></div>'),this.$fullimage=$('<div class="og-fullimg"></div>').append(this.$loading),this.$closePreview=$('<span class="og-close"></span>'),this.$previewInner=$('<div class="og-expander-inner"></div>').append(this.$closePreview,this.$fullimage,this.$details),this.$previewEl=$('<div class="og-expander"></div>').append(this.$previewInner),this.$item.append(this.getEl()),T&&this.setTransition()},update:function(i){if(i&&(this.$item=i),-1!==c){var e=l.eq(c);e.removeClass("og-expanded"),this.$item.addClass("og-expanded"),this.positionPreview()}c=this.$item.index();var t=this.$item.children("a"),n={href:t.attr("href"),largesrc:t.data("img"),name:t.data("name"),title:t.data("title"),description:t.data("description")};this.$title.html(n.title),this.$name.html(n.name),this.$description.html(n.description),this.$href.attr("href",n.href);var s=this;"undefined"!=typeof s.$largeImg&&s.$largeImg.remove(),s.$fullimage.is(":visible")&&(this.$loading.show(),$("<img/>").load(function(){var i=$(this);i.attr("src")===s.$item.children("a").data("img")&&(s.$loading.hide(),s.$fullimage.find("img").remove(),s.$largeImg=i.fadeIn(350),s.$fullimage.append(s.$largeImg))}).attr("src",n.largesrc))},open:function(){setTimeout($.proxy(function(){this.setHeights(),this.positionPreview()},this),25)},close:function(){var i=this,e=function(){T&&$(this).off(A),i.$item.removeClass("og-expanded"),i.$previewEl.remove()};return setTimeout($.proxy(function(){"undefined"!=typeof this.$largeImg&&this.$largeImg.fadeOut("fast"),this.$previewEl.css("height",0);var i=l.eq(this.expandedIdx);i.css("height",i.data("height")).on(A,e),T||e.call()},this),25),!1},calcHeight:function(){var i=m.height-this.$item.data("height")-u,e=m.height;i<y.minHeight&&(i=y.minHeight,e=y.minHeight+this.$item.data("height")+u),this.height=i,this.itemHeight=e,console.log(this.height+" "+this.itemHeight)},setHeights:function(){var i=this,e=function(){T&&i.$item.off(A),i.$item.addClass("og-expanded")};this.calcHeight(),this.$previewEl.css("height",this.height-100),this.$item.css("height",this.itemHeight-100).on(A,e),T||e.call()},positionPreview:function(){var i=this.$item.data("offsetTop"),e=this.$previewEl.offset().top-f,t=this.height+this.$item.data("height")+u<=m.height?i:this.height<m.height?e-(m.height-this.height):e;v.animate({scrollTop:t},y.speed)},setTransition:function(){this.$previewEl.css("transition","height "+y.speed+"ms "+y.easing),this.$item.css("transition","height "+y.speed+"ms "+y.easing)},getEl:function(){return this.$previewEl}},{init:i,addItems:e}}();s.init()}(jQuery);